<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>¬°Gracias! | V√©rtice Agency</title>
  <meta name="robots" content="noindex,follow" />
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="preconnect" href="https://connect.facebook.net" crossorigin>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:linear-gradient(135deg,#0ea5e9 0%,#7c3aed 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;color:#111}
    .card{background:#fff;border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.2);padding:40px 32px;max-width:680px;width:92%}
    h1{margin:0 0 10px;font-size:28px;line-height:1.15}
    p{margin:8px 0;color:#444}
    .btn{display:inline-flex;align-items:center;gap:10px;margin-top:18px;background:#0ea5e9;color:#fff;padding:12px 18px;border-radius:12px;text-decoration:none;font-weight:800}
    .btn.secondary{background:#6b7280}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:999px;border:2px solid #bfdbfe;background:linear-gradient(90deg,#eff6ff,#f5f3ff);color:#1d4ed8;font-weight:800;margin-bottom:12px}
    .muted{color:#6b7280;font-size:12px;margin-top:12px}
  </style>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YN77ENMF5B"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-YN77ENMF5B', { page_title: 'Gracias', page_location: location.href });
  </script>

  <!-- Meta Pixel -->
  <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init','1419230625849117');
    fbq('track','PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1419230625849117&ev=PageView&noscript=1"/>
  </noscript>
</head>
<body>
  <main class="card" aria-live="polite">
    <div class="badge" id="ty-badge">üéâ ¬°Gracias por tu inter√©s!</div>
    <h1 id="ty-title">¬°Gracias por unirte!</h1>
    <p id="ty-body">Hemos recibido tu informaci√≥n correctamente. Revisa tu bandeja de entrada (y spam) para confirmar.</p>
    <p id="ty-extra">Mientras tanto, puedes volver al inicio y seguir explorando.</p>

    <div style="display:flex;gap:12px;flex-wrap:wrap">
      <a class="btn" href="/">‚Üê Volver al inicio</a>
      <a class="btn secondary" id="cta-recursos" href="/#recursos" style="display:none">üéÅ Ver recursos gratuitos</a>
      <a class="btn secondary" id="cta-contact" href="/#contact" style="display:none">üìû Solicitar auditor√≠a</a>
    </div>

    <p class="muted">V√©rtice Agency ‚Ä¢ Auditor√≠a sin compromiso ¬∑ Resultados medibles ¬∑ Soporte en espa√±ol</p>
  </main>

  <script>
    (function () {
      const qs = new URLSearchParams(location.search);
      const rawSrc = (qs.get('src') || '').toLowerCase();
      // Soportar ambos: ?src=magnet y ?src=leadmagnet
      const src = rawSrc === 'leadmagnet' ? 'magnet' : rawSrc;
      const name = qs.get('name') || '';

      // GA4: evento de vista y conversi√≥n por tipo
      try {
        gtag('event','thank_you_view',{source: src || 'unknown'});
        const map = {
          magnet:    { event: 'download', value: 75 },
          newsletter:{ event: 'subscribe', value: 50 },
          contact:   { event: 'generate_lead', value: 100 }
        };
        if (map[src]) {
          const m = map[src];
          gtag('event', m.event, { value: m.value, currency: 'USD' });
        }
      } catch (e) {}

      // Pixel: evento seg√∫n tipo (Subscribe es v√°lido en Meta)
      try {
        const pmap = {
          magnet:    { event: 'CompleteRegistration', value: 75 },
          newsletter:{ event: 'Subscribe', value: 50 },
          contact:   { event: 'Lead', value: 100 }
        };
        if (pmap[src]) {
          const m = pmap[src];
          fbq('track', m.event, { value: m.value, currency: 'USD' });
        }
      } catch (e) {}

      // Personalizaci√≥n de mensajes y CTAs
      const $badge = document.getElementById('ty-badge');
      const $title = document.getElementById('ty-title');
      const $body  = document.getElementById('ty-body');
      const $extra = document.getElementById('ty-extra');
      const $ctaRec = document.getElementById('cta-recursos');
      const $ctaContact = document.getElementById('cta-contact');

      if (src === 'magnet') {
        $badge.textContent = '‚¨áÔ∏è Tu descarga est√° lista';
        $title.textContent = '¬°Recurso enviado!';
        $body.textContent  = name
          ? `Hemos enviado el recurso ‚Äú${decodeURIComponent(name)}‚Äù a tu correo.`
          : 'Hemos enviado tu recurso a tu correo.';
        $extra.textContent = 'Si no lo ves en 5 minutos, revisa tu carpeta de spam.';
        $ctaRec.style.display = 'inline-flex';
      } else if (src === 'newsletter') {
        $badge.textContent = 'üì¨ ¬°Bienvenid@ al newsletter!';
        $title.textContent = '¬°Suscripci√≥n confirmada!';
        $body.textContent  = 'Desde hoy recibir√°s estrategias y recursos de marketing con IA.';
        $extra.textContent = 'Revisa tu correo para la confirmaci√≥n (puede llegar a spam).';
        $ctaRec.style.display = 'inline-flex';
        $ctaContact.style.display = 'inline-flex';
      } else if (src === 'contact') {
        $badge.textContent = '‚úÖ ¬°Gracias por confiar en nosotros!';
        $title.textContent = '¬°Solicitud de auditor√≠a recibida!';
        $body.textContent  = 'En las pr√≥ximas 24 horas te contactaremos por WhatsApp o email para coordinar tu auditor√≠a gratuita.';
        $extra.textContent = 'Mientras tanto, puedes explorar nuestros recursos gratuitos.';
        $ctaRec.style.display = 'inline-flex';
      }
    })();
  </script>
</body>
</html>
